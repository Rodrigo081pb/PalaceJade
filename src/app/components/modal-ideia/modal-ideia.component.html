<div *ngIf="aberto" class="fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center">
  <div @modalAnim class="bg-[#121212] border border-[#2a2a2a] rounded-2xl p-6 w-[90%] max-w-md shadow-xl text-white text-sm">

    <!-- Logo -->
    <div class="flex justify-center mb-2">
      <app-logo class="scale-[1.2]"></app-logo>
    </div>

    <h3 class="text-xl font-bold text-center mb-4">Tem uma ideia?</h3>

    <!-- Etapa 1: Formulário -->
    <div *ngIf="etapa === 1" class="flex flex-col gap-4 animate-fade-in">
      <input [(ngModel)]="nome" placeholder="Qual seu nome?" class="input-modal" />

      <input [(ngModel)]="numero" placeholder="+55 (DDD) XXXXX-XXXX" class="input-modal" />

      <select [(ngModel)]="empreendedor" class="input-modal">
        <option value="" disabled selected>Você é empreendedor?</option>
        <option value="Sim">Sim</option>
        <option value="Não">Não</option>
      </select>

      <p class="text-[#ccc]">O que esse projeto envolve?</p>
      <div class="grid grid-cols-2 gap-x-4 gap-y-2">
        <label *ngFor="let op of opcoes" class="flex gap-2 items-center">
          <input type="checkbox" (change)="toggleOpcao(op)"> {{ op }}
        </label>
      </div>

      <textarea [(ngModel)]="mensagem" placeholder="Mensagem opcional..." rows="2" class="input-modal resize-none"></textarea>

      <p *ngIf="erro" class="text-red-400 text-sm text-center">{{ erro }}</p>

      <button class="btn w-full" (click)="avancarEtapa()">Avançar</button>
      <button class="text-purple-400 text-xs hover:underline mx-auto" (click)="resetar()">Cancelar</button>
    </div>

    <!-- Etapa 2: Análise -->
    <div *ngIf="etapa === 2" class="text-center py-10 animate-fade-in">
      <div class="checkmark-analyzing mx-auto mb-4"></div>
      <p class="text-xl text-purple-400 font-semibold mt-4">Estamos analisando seu projeto!</p>
      <p class="text-[#ccc] mt-2">Nossa equipe recebeu sua ideia e está avaliando com carinho.</p>
    </div>

    <!-- Etapa 3: Sucesso -->
    <div *ngIf="etapa === 3" class="text-center py-10 animate-fade-in">
      <div class="checkmark-success mx-auto mb-4"></div>
      <p class="text-xl text-green-400 font-semibold mt-4">Enviado com sucesso!</p>
      <p class="text-[#ccc] mt-2">Nossa equipe vai analisar sua ideia com carinho.</p>
      <p class="text-white mt-6 font-medium">Deseja falar com a gente agora?</p>
      <div class="flex justify-center gap-4 mt-4">
        <button class="btn bg-purple-600" (click)="irParaContato()">Sim</button>
        <button class="btn bg-[#333]" (click)="fecharModalComReset()">Agora não</button>
      </div>
    </div>

  </div>
</div>
